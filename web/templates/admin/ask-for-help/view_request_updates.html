{% set active_page = "admin.ask_for_help.index" %}
{% extends "./_helpers/layout/admin_layout.html" %}
{% from "./_helpers/macros/pagination_buttons.html" import pagination_buttons with context %}
{% from './_helpers/macros/multiple_photo_input.html' import render_multiple_photo_field with context %}
{% from './_helpers/macros/custom_input.html' import render_field %}
{% from './_helpers/macros/donation_request_update.html' import donation_request_update with context %}
{% from "./_helpers/macros/empty_list.html" import empty_list %}
{% block title %}
  Ask for help
{% endblock title %}
{% block content %}
  <dialog id="add-post-modal" class="modal modal-bottom sm:modal-middle">
    <div class="modal-box">
      <h2 class="mb-4 text-2xl font-bold">Add Update Post</h2>
      <form class="grid w-full grid-cols-1 gap-4" method="post" novalidate>
        {{ form.csrf_token() }}
        {{ render_field(form.update_text) }}
        {{ render_multiple_photo_field(form.pictures) }}
        <button type="submit" class="w-full btn btn-md">Submit</button>
      </form>
    </div>
  </dialog>
  <div class="flex flex-col gap-12">
    {% include "./_helpers/partials/donation_request_header.html" %}
    <div class="flex items-center gap-8 p-3 bg-white shadow">
      <a class="w-full"
         href="{{ url_for('admin.ask_for_help.view_request_updates', id=data.id) }}">
        <div class="flex items-center justify-center flex-1 p-3 border rounded-lg border-primary-100 bg-opacity-5 bg-primary-100">
          <h1 class="font-bold text-primary-500">Updates</h1>
        </div>
      </a>
      <a class="w-full"
         href="{{ url_for('admin.ask_for_help.view_request_donations', id=data.id) }}">
        <div class="flex items-center justify-center flex-1 p-3 border rounded-lg">
          <h1 class="font-bold">Donations</h1>
        </div>
      </a>
    </div>
    <div class="flex flex-col items-center gap-4">
      <div class="flex justify-end w-full">
        <button id="add-post-button"  class="text-white btn btn-primary">Add Update Post</button>
      </div>
      {% for post in posts %}
        {% for post in posts %}{{ donation_request_update(post) }}{% endfor %}
      {% endfor %}
      {{ empty_list(posts, "No Posts Found.") }}
    </div>
  </div>
  <script>
    const addPostModal = document.querySelector("#add-post-modal")
    const addPostButton = document.querySelector("#add-post-button")

    addPostButton.addEventListener("click", ()=> {
      addPostModal.showModal();
    })
  </script>
{% endblock content %}
